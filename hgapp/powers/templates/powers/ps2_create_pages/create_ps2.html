{% extends "site_base.html" %}

{% load static %}

{% block extra_styles %}
	<link rel="stylesheet" type="text/css" href="{% static 'powers/ps2_create_style.css' %}" />
{% endblock %}

{% block extra_scripts %}
	{% comment %} <script src="https://unpkg.com/vue@next"></script> {% endcomment %}
	<script src="{% static 'powers/vue.next.js' %}"></script>
	{{power_blob|json_script:"powerBlob"}}
	<script src="{% static 'powers/ps2_create_script.js' %}"></script>
{% endblock %}

{% block head_title %}
	Ps2 Prototype
{% endblock %}

{% block body_base %}
<div class="container-fluid" id="vue-app">
	<div class="row" style="max-height: 300px; overflow:scroll;">
		<div id="modalities" class="col-md-4">
			<h3>Modalities</h3>
			<div v-for="component in modalities"
				 :key="component.id">
				<label v-bind:for="component.id" class="thumbnail" style="margin: 5px;">
					<input type="radio"
						   v-bind:id="component.id"
						   v-bind:name="component.type"
						   v-bind:value="component.slug"
						   v-model="selectedModality"
						   @change="clickModality"
					>
					<span  style="padding-left: 10px;">
						{ component.displayName }
					</span>
				</label>
			</div>
		</div>
		<div id="effects" class="col-md-4">
			<h3>Effects</h3>
			<div v-for="component in effects"
				 :key="component.id">
				<label v-bind:for="component.id" class="thumbnail" style="margin: 5px;">
					<input type="radio"
						   v-bind:id="component.id"
						   v-bind:name="component.type"
						   v-bind:value="component.slug"
						   v-model="selectedEffect"
						   @change="clickEffect"
					>
					<span  style="padding-left: 10px;">
						{ component.displayName }
					</span>
				</label>
			</div>
		</div>
		<div id="vectors" class="col-md-4">
			<h3>Vectors</h3>
			<div v-for="component in vectors"
				 :key="component.id">
				<label v-bind:for="component.id" class="thumbnail" style="margin: 5px;">
					<input type="radio"
						   v-bind:id="component.id"
						   v-bind:name="component.type"
						   v-bind:value="component.slug"
						   v-model="selectedVector"
						   @change="clickVector"
					>
					<span  style="padding-left: 10px;">
						{ component.displayName }
					</span>
				</label>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<h3 class="text-center">Unrendered System</h3>
			<div id="unrendered-system" v-html="unrenderedSystem">
			</div>
			<h3 class="text-center">Rendered System</h3>
			<div id="rendered-system" v-html="renderedSystem">
			</div>
		</div>
		<div class="col-md-6">
			<h3 class="text-center">Modifiers</h3>
			<h4>Enhancements</h4>
			<div id="js-enhancements-container">
				<div v-for="modifier in enhancements"
						:key="modifier.id" >
					{% with 'selectedEnhancements' as vue_model_name %}
						{% with 'clickEnhancement' as vue_on_click %}
							{% include "powers/ps2_create_pages/snip_modifier_template.html" %}
						{% endwith %}
					{% endwith %}
				</div>
			</div>
			<h4>Drawbacks</h4>
			<div id="js-drawbacks-container">
				<div v-for="modifier in drawbacks"
						:key="modifier.id">
					{% with 'selectedDrawbacks' as vue_model_name %}
					{% with 'clickDrawback' as vue_on_click %}
					{% include "powers/ps2_create_pages/snip_modifier_template.html" %}
					{% endwith %}
					{% endwith %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
